<!DOCTYPE html>
<html>
<head>
    <title>Lab Reservation System - Reserve</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .group-button{
            text-align: center;
        }
        .search-button{
            border-bottom-right-radius: 0px;
            border-bottom-left-radius: 0px;
            padding: 15px 0px;
            width: 65px;
            background-color: #f1cf54;
        }
        .search-button.red{
            background-color: #e54c44; /* Updated red color */
        }
        .subcontainer{
            display: none; /* Hide the subcontainer by default */
            border-top-right-radius: 0px;
            border-top-left-radius: 0px;
            margin-top: -0.3px;
            text-align: center;
            width: 440px;
            background-color: #e54c44;
        }
        .sub-subcontainer{
            background-color: #fffcef;
            width: 400px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 8px;
        }
        .lab-title{
            font-size: 20px;
            text-align: left;
        }
        .reserve-button {
            margin-top: 0px;
            margin-bottom: 20px;
            border: 0px;
            width: 400px;
            background-color: #e54c44;
            text-align: center;
            color: white;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        p{
            text-align: left; 
            margin-top: -10px;
        }
    </style>
    <script src = "js/User.js"></script>
    <script src="js/CurrentUser.js"></script>
</head>
<body>
    <nav>
        <div class="homebutton"><a href="dashboard.html"><img id="home-icon" src="icons/home.png"> Home</a></div>
        <div class="dropdown">
            <a href="userviewprofile.html">User Profile</a>
            <div class="dropdown-content">
                <a href="userviewprofile.html">View Profile</a>
                <a href="usereditprofile.html">Edit Profile</a>
                <a href="userdelete.html">Delete Profile</a>
            </div>
        </div>
        <div class="dropdown">
            <a href="reserve.html">Reserve</a>
            <div class="dropdown-content">
                <a href="reserve.html">Reserve</a>
                <a href="reserveedit.html">Edit Reservation</a>
                <a href="reservesee.html">See Reservations</a>
                <a href="reserveviewslots.html">View Available Slots</a>
            </div>
        </div>
        <div class="dropdown">
            <a href="#">Search</a>
            <div class="dropdown-content">
                <a href="searchusers.html">Search Users</a>
                <a href="searchslots.html">Search Slots</a>
            </div>
        </div>
        <div><a href="userlogout.html">Logout</a></div>
    </nav>
    <div class="container">
        <h1>Set Reservation</h1>
        <div class="group-button">
            <div class="btn-group">
                <button class="search-button" id="Sunday">SUN</button>
                <button class="search-button" id="Monday">MON</button>
                <button class="search-button" id="Tuesday">TUE</button>
                <button class="search-button" id="Wednesday">WED</button>
                <button class="search-button" id="Thursday">THU</button>
                <button class="search-button" id="Friday">FRI</button>
                <button class="search-button" id="Saturday">SAT</button>
            </div>
        </div>
        <div class="subcontainer" id="subContainer">
            <div class="sub-subcontainer" id="Lab1">
                <h1 class="lab-title">Lab 1</h1>
                <div class="lab-info">
                    <p class="building">Freddy's Frightful Manor</p>
                </div>
                <button class="reserve-button" onclick="reserveLab('Lab 1', 'Frightful Manor')">Reserve</button>
            </div>
            <div class="sub-subcontainer" id="Lab2">
                <h1 class="lab-title">Lab 2</h1>
                <div class="lab-info">
                    <p class="building">Chica's Chilling Chamber</p>
                </div>
                <button class="reserve-button" onclick="reserveLab('Lab 2', 'Chica Chilling Chamber')">Reserve</button>
            </div>
            <div class="sub-subcontainer" id="Lab3">
                <h1 class="lab-title">Lab 3</h1>
                <div class="lab-info">
                    <p class="building">Puppet's Perilous Palace</p>
                </div>
                <button class="reserve-button" onclick="reserveLab('Lab 3', 'Puppet Perilous Palace')">Reserve</button>
            </div>
        </div>
    </div>
    <script>

        function reserveLab(labName, location) {
            var currentUser = getCurrentUser(); 
            var userStatus = currentUser.status; 

            localStorage.setItem('selectedLab', labName);
            localStorage.setItem('selectedRoom', location);
            
            if (userStatus === 'T') { 
                window.location.href = 'reserveforstudent.html';
            } else {
                window.location.href = 'reserveconfirm.html';
            }
        }

        function setDay(dayName){
            localStorage.setItem('selectedDay', dayName);
        }
    
        document.querySelectorAll('.search-button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.search-button').forEach(btn => {
                    btn.classList.remove('red');
                });
                button.classList.add('red');
    
                // Show the subcontainer when a button is clicked
                document.getElementById('subContainer').style.display = 'block';
                
                // Call setDay function with the day name
                setDay(button.textContent);
            });
        });
    </script>
</body>
</html>
